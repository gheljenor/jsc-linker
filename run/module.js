require("colors");var nodePath=require("path"),fs=require("fs"),_=require("underscore"),Handlebars=require("handlebars");(function(a){var b=[],c=[],d=function(){d.push.apply(this,arguments),d.log.apply(this,arguments)};d.logs=[],d.push=function(a,b,c,e){return d.logs.unshift({file:a,event:b,state:c,data:e,time:new Date}),d.logs.length>1e3&&(d.logs.length=1e3),this},d.log=function(a,b,c,d){return"error"==b&&console.error(a,b,c,d),this};var e=function(){d("module","file","start","templates");var a=Handlebars.template,b=Handlebars.templates=Handlebars.templates||{},c=Handlebars.partials=Handlebars.partials||{};return c["{root}/parser/tpl/submodule"]=b["{root}/parser/tpl/submodule"]=a({compiler:[5,">= 2.0.0"],main:function(a,b,c,d){var e,f,g="function",h=this.escapeExpression,i=b.helperMissing,j="\r\n// ------- Submodule: ";return f=b.name||a&&a.name,e=typeof f===g?f.call(a,{name:"name",hash:{},data:d}):f,(e||0===e)&&(j+=e),j+="\r\n__m["+h((f=b.order||a&&a.order,typeof f===g?f.call(a,{name:"order",hash:{},data:d}):f))+"] = (function (",f=b.submodule||a&&a.submodule||i,e=f.call(a,a,{name:"submodule",hash:{type:"import_inner"},data:d}),(e||0===e)&&(j+=e),j+=') {\r\n    var __m, module;\r\n    var runLogger = _runLogger.bind(this, "',f=b.name||a&&a.name,e=typeof f===g?f.call(a,{name:"name",hash:{},data:d}):f,(e||0===e)&&(j+=e),j+='");\r\n    try {\r\n        runLogger("file", "start", "',f=b.name||a&&a.name,e=typeof f===g?f.call(a,{name:"name",hash:{},data:d}):f,(e||0===e)&&(j+=e),j+='");\r\n\r\n        ',f=b.file||a&&a.file,e=typeof f===g?f.call(a,{name:"file",hash:{},data:d}):f,(e||0===e)&&(j+=e),j+='\r\n\r\n        runLogger("file", "end", "',f=b.name||a&&a.name,e=typeof f===g?f.call(a,{name:"name",hash:{},data:d}):f,(e||0===e)&&(j+=e),j+='");\r\n    } catch (e) {\r\n        runLogger("error", "init", e);\r\n    }\r\n\r\n    //- before export line\r\n    ',f=b.submodule||a&&a.submodule||i,e=f.call(a,a,{name:"submodule",hash:{type:"before_export"},data:d}),(e||0===e)&&(j+=e),j+="\r\n\r\n    return { ",f=b.submodule||a&&a.submodule||i,e=f.call(a,a,{name:"submodule",hash:{type:"export"},data:d}),(e||0===e)&&(j+=e),j+=" };\r\n}).apply(this, [ ",f=b.submodule||a&&a.submodule||i,e=f.call(a,a,{name:"submodule",hash:{type:"import_external"},data:d}),(e||0===e)&&(j+=e),j+=" ]);\r\n\r\n//- after line\r\n",f=b.submodule||a&&a.submodule||i,e=f.call(a,a,{name:"submodule",hash:{type:"after"},data:d}),(e||0===e)&&(j+=e),j},useData:!0}),c["{root}/parser/tpl/template"]=b["{root}/parser/tpl/template"]=a({1:function(a,b,c,d){var e,f,g=b.helperMissing,h="\r\n    (function(){\r\n        var imports = _.object([";return f=b.template||a&&a.template||g,e=f.call(a,a,{name:"template",hash:{type:"import_inner"},data:d}),(e||0===e)&&(h+=e),h+="], _.toArray(arguments));\r\n        var tpl = ",f=b.template||a&&a.template||g,e=f.call(a,a,{name:"template",hash:{type:"precompile"},data:d}),(e||0===e)&&(h+=e),h+=';\r\n        var main = tpl.main;\r\n        tpl.main = function(depth0, helpers, partials, data){\r\n            return tmp.call(this, _.extend(depth0, imports), helpers, partials, data);\r\n        };\r\n\r\n        partials["',f=b.template||a&&a.template||g,e=f.call(a,a,{name:"template",hash:{type:"name"},data:d}),(e||0===e)&&(h+=e),h+='"] = templates["',f=b.template||a&&a.template||g,e=f.call(a,a,{name:"template",hash:{type:"name"},data:d}),(e||0===e)&&(h+=e),h+='"] = template(tpl);\r\n    }.apply(this, [ ',f=b.template||a&&a.template||g,e=f.call(a,a,{name:"template",hash:{type:"import_external"},data:d}),(e||0===e)&&(h+=e),h+" ]));\r\n"},3:function(a,b,c,d){var e,f,g=b.helperMissing,h='\r\n    partials["';return f=b.template||a&&a.template||g,e=f.call(a,a,{name:"template",hash:{type:"name"},data:d}),(e||0===e)&&(h+=e),h+='"] = templates["',f=b.template||a&&a.template||g,e=f.call(a,a,{name:"template",hash:{type:"name"},data:d}),(e||0===e)&&(h+=e),h+='"] = template(',f=b.template||a&&a.template||g,e=f.call(a,a,{name:"template",hash:{type:"precompile"},data:d}),(e||0===e)&&(h+=e),h+");\r\n"},compiler:[5,">= 2.0.0"],main:function(a,b,c,d){var e,f,g="function",h=b.helperMissing,i="\r\n\r\n// ------- Template: ";return f=b.name||a&&a.name,e=typeof f===g?f.call(a,{name:"name",hash:{},data:d}):f,(e||0===e)&&(i+=e),i+="\r\n",f=b.template||a&&a.template||h,e=f.call(a,a,{name:"template",hash:{type:"check_imports"},fn:this.program(1,d),inverse:this.program(3,d),data:d}),(e||0===e)&&(i+=e),i},useData:!0}),c["{root}/parser/tpl/module"]=b["{root}/parser/tpl/module"]=a({1:function(a,b,c,d){var e,f="\r\n        var TPL = (function(){\r\n            _runLogger('module', 'file', 'start', 'templates');\r\n            var template = Handlebars.template,\r\n            templates = Handlebars.templates = Handlebars.templates || {},\r\n            partials = Handlebars.partials = Handlebars.partials || {};\r\n\r\n            ";return e=b.each.call(a,(e=a&&a.template,null==e||e===!1?e:e.files),{name:"each",hash:{},fn:this.program(2,d),inverse:this.noop,data:d}),(e||0===e)&&(f+=e),f+"\r\n\r\n            _runLogger('module', 'file', 'end', 'templates');\r\n            return templates;\r\n        })();\r\n    "},2:function(a,b,c,d){var e;return e=this.invokePartial(c["{root}/parser/tpl/template"],"{root}/parser/tpl/template",a,void 0,b,c,d),e||0===e?e:""},4:function(a,b,c,d){var e;return e=this.invokePartial(c["{root}/parser/tpl/submodule"],"{root}/parser/tpl/submodule",a,void 0,b,c,d),e||0===e?e:""},compiler:[5,">= 2.0.0"],main:function(a,b,c,d){var e,f="\r\n\r\n\r\n\r\n(function(__g){\r\n    var __m = [], __i = [];\r\n\r\n    var _runLogger = function(){\r\n        _runLogger.push.apply(this, arguments);\r\n        _runLogger.log.apply(this, arguments);\r\n    };\r\n    _runLogger.logs = [];\r\n\r\n    _runLogger.push = function(file, event, state, data){\r\n        _runLogger.logs.unshift({ file: file, event: event, state: state, data: data, time: new Date() });\r\n        if (_runLogger.logs.length > 1000) _runLogger.logs.length = 1000;\r\n        return this;\r\n    };\r\n    _runLogger.log = function(file, event, state, data){\r\n        if (event == 'error') console.error(file, event, state, data);\r\n        return this;\r\n    };\r\n\r\n    ";return e=b["if"].call(a,a&&a.template,{name:"if",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),(e||0===e)&&(f+=e),f+="\r\n\r\n    try {\r\n        ",e=b.each.call(a,(e=a&&a.submodule,null==e||e===!1?e:e.files),{name:"each",hash:{},fn:this.program(4,d),inverse:this.noop,data:d}),(e||0===e)&&(f+=e),f+"\r\n    }catch(e){ _runLogger('module', 'error', 'startup', e); }\r\n\r\n\r\n\r\n    __m.length = 0; __m = null;\r\n    __i.length = 0; __i = null;\r\n    __g = null;\r\n\r\n    return this;\r\n}).call(\r\n    typeof module !== \"undefined\" && module.exports || {},\r\n    typeof window !== \"undefined\" && window || this\r\n);"},usePartial:!0,useData:!0}),d("module","file","end","templates"),b}();try{b[0]=function(){function a(){return g}function b(a){g=a,c(g)}function c(a){var b,c;do{b=!1;for(c in a)a[c]=a[c].replace(/\{(.*)\}/g,function(c,d){return b=!0,a[d]||d})}while(b);for(c in a)a[c]=nodePath.normalize(a[c])}function e(a){return nodePath.normalize(a.replace(h,function(a,b){return g[b]||b}))}var f=d.bind(this,"{root}/config/paths");try{f("file","start","{root}/config/paths");var g,h=/\{(.*)\}/g;f("file","end","{root}/config/paths")}catch(i){f("error","init",i)}return{getPaths:a,setPaths:b,normalizePath:e}}.apply(this,[]),b[1]=function(a){function b(a){f=a}function c(b,c){return b=a(b),"tpl"==b.split(".").pop()?(j("Reading template file: ".bold.green,(b+"."+l).green),fs.readFileSync(b+"."+l,{encoding:f})):!c&&fs.existsSync(b+".min.js")?(j("Reading minified file: ".bold.green,(b+".min.js").green),fs.readFileSync(b+".min.js",{encoding:f})):(j("Reading file: ".bold.green,(b+".js").green),fs.readFileSync(b+".js",{encoding:f}))}var e=d.bind(this,"{root}/fs/read-file");try{e("file","start","{root}/fs/read-file");var f="UTF-8";e("file","end","{root}/fs/read-file")}catch(g){e("error","init",g)}return{setEncoding:b,reader:c}}.apply(this,[b[0].normalizePath]),b[2]=function(){var a=d.bind(this,"{root}/directives/directives.list");try{a("file","start","{root}/directives/directives.list");var b={},e=[],f=[],g=[];a("file","end","{root}/directives/directives.list")}catch(h){a("error","init",h)}return c.push(b),c.push(e),c.push(f),c.push(g),{}}.apply(this,[]);var f=c.shift(),g=c.shift(),h=c.shift(),i=c.shift();b[3]=function(){var a=d.bind(this,"{root}/directives/override");try{a("file","start","{root}/directives/override");var b={};f.override={before:function(a,c,d,e){return d&&(b={}),a.replace(e,function(a,c,d){return d=d.split("#")[0],b[d]?a.replace(d,b[d]):a})},line:function(a){return a=a.split("#"),b[a[0]]=a[1],{inner:a[0],outer:a[1]}}},a("file","end","{root}/directives/override")}catch(c){a("error","init",c)}return{}}.apply(this,[]),b[4]=function(){var a=d.bind(this,"{root}/directives/load");try{a("file","start","{root}/directives/load"),f.load={line:function(a){return a},block:function(a,b){b.parseQueue(a)}},g.push("load"),a("file","end","{root}/directives/load")}catch(b){a("error","init",b)}return{}}.apply(this,[]),b[5]=function(a){var b=d.bind(this,"{root}/directives/require");try{b("file","start","{root}/directives/require"),f.require={before:function(b,c,d,e){return b.replace(e,function(b,c,d){return"require"!=c?b:a(d)})}},b("file","end","{root}/directives/require")}catch(c){b("error","init",c)}return{}}.apply(this,[b[1].reader]),b[6]=function(){var a=d.bind(this,"{root}/directives/include");try{a("file","start","{root}/directives/include"),f.include={line:function(a){return a},block:function(a,b){b.parseQueue(a,"library")}},a("file","end","{root}/directives/include")}catch(b){a("error","init",b)}return{}}.apply(this,[]),b[7]=function(){var a=d.bind(this,"{root}/directives/template");try{a("file","start","{root}/directives/template"),f.template={before:null,line:function(a){return a},block:function(a,b){b.parseQueue(a,"template")}},g.push("template"),a("file","end","{root}/directives/template")}catch(b){a("error","init",b)}return{}}.apply(this,[]),b[8]=function(){var a=d.bind(this,"{root}/directives/uses");try{a("file","start","{root}/directives/uses"),f.uses={before:null,line:function(a){return a=a.split("#"),{file:a[0],inner:a[1]}},block:function(a,b){var c=a.map(function(a){return a.file});b.parseQueue(c)},import_in:function(a,b){return b.inner},import_out:function(a,b){return"__m[ "+a.submodule.files[b.file].order+" ]"}},g.push("uses"),h.push("uses"),a("file","end","{root}/directives/uses")}catch(b){a("error","init",b)}return{}}.apply(this,[]),b[9]=function(){var a=d.bind(this,"{root}/directives/import");try{a("file","start","{root}/directives/import"),f.import={line:function(a){a=a.split("#");var b=a[1].split(" as ");return{file:a[0],inner:b[1]||b[0],outer:b[0]}},block:function(a,b){var c=a.map(function(a){return a.file});b.parseQueue(c)},import_in:function(a,b){return b.inner},import_out:function(a,b){return"__m["+a.submodule.files[b.file].order+']["'+b.outer+'"]'}},g.push("import"),a("file","end","{root}/directives/import")}catch(b){a("error","init",b)}return{}}.apply(this,[]),b[10]=function(){var a=d.bind(this,"{root}/directives/export");try{a("file","start","{root}/directives/export"),f.export={line:function(a){return a=a.split(" as "),{inner:a[0],outer:a[1]||a[0]}},"export":function(a,b){return"'"+b.outer+"': "+b.inner}},g.push("export"),i.push("export"),a("file","end","{root}/directives/export")}catch(b){a("error","init",b)}return{}}.apply(this,[]),b[11]=function(){var a=d.bind(this,"{root}/directives/internal");try{a("file","start","{root}/directives/internal"),f.internal={line:function(a){return a=a.split(" as "),{inner:a[0],outer:a[1]||a[0]}},before_export:function(a,b){return"__i.push("+b.inner+")"},after:function(a,b){return"var "+b.outer+" = __i.shift()"}},a("file","end","{root}/directives/internal")}catch(b){a("error","init",b)}return{}}.apply(this,[]),b[12]=function(){var a=d.bind(this,"{root}/directives/external");try{a("file","start","{root}/directives/external"),f.external={line:function(a){return a=a.split(" as "),{inner:a[0],outer:a[1]||a[0]}},before_export:function(a,b){return"this['"+b.outer+"']="+b.inner},after:function(a,b){return"var "+b.outer+" = this['"+b.outer+"']"}},a("file","end","{root}/directives/external")}catch(b){a("error","init",b)}return{}}.apply(this,[]),b[13]=function(){var a=d.bind(this,"{root}/directives/global");try{a("file","start","{root}/directives/global"),f.global={line:function(a){return a=a.split(" as "),{inner:a[0],outer:a[1]||a[0]}},before_export:function(a,b){return"__g['"+b.outer+"']="+b.inner}},a("file","end","{root}/directives/global")}catch(b){a("error","init",b)}return{}}.apply(this,[]),b[14]=function(){var a=d.bind(this,"{root}/directives/test");try{a("file","start","{root}/directives/test"),f.test={line:function(a){return a},block:function(a,b,c){a.forEach(function(a){b.add("test",{tests:{file:c.name},name:a})})}},a("file","end","{root}/directives/test")}catch(b){a("error","init",b)}return{}}.apply(this,[]),b[15]=function(){var a=d.bind(this,"{root}/directives/directives");try{a("file","start","{root}/directives/directives"),a("file","end","{root}/directives/directives")}catch(b){a("error","init",b)}return{}}.apply(this,[]),b[16]=function(a){function b(b,c,d){if(d&&(h={}),h[b])return h[b];var i="tpl"==b.split(".").pop(),l=i?g:e,o=a(b,d),p={name:b,type:i?"template":"submodule"};p.file=m(o,p,d,l),h[b]=p;for(var q,r,s;q=l.exec(p.file);){if(!f[q[1]])throw new TypeError("Unknown directive: "+q[1]);r=f[q[1]],r.line&&(p[q[1]]||(p[q[1]]=[]),s=p[q[1]],s.push(r.line(q[2],d)))}var t=[],u={},v={parseQueue:function(a,b){if(b||(b=function(a){v.add(a.type||"submodule",a)}),_.isString(b)){var c=b;b=function(a){v.add(c,a)}}a.forEach(function(a){u[a]||(u[a]={name:a,cbs:[]},t.push(u[a])),u[a].cbs.push(b)})},add:function(a,b){c[a]||(c[a]={files:{},index:0}),c[a].files[b.name]||(c[a].files[b.name]=b,b.order=c[a].index++)}};for(var w in f)f[w].block&&p[w]&&f[w].block(p[w],v,p,c);if(k)for(var x in p)"file"!=x&&j(x.bold.blue,JSON.stringify(p[x],null,2).white);return n(t,c),p}var c=d.bind(this,"{root}/parser/reader");try{c("file","start","{root}/parser/reader");var e=/\/\/\#([^ \n]+) ?(.*?)\s*$/gm,g=/\{\{!\#([^ \}]*) ?(.*?)\}\}/g,h={},i={};for(var l in f)f[l].before&&(i[l]=f[l].before);var m=function(a,b,c,d){for(var e in i){var f=i[e](a,b,c,d);if(f!==a)return m(f,b,c,d)}return a},n=function(a,c){var d,e,f;for(d=0,e=a.length;e>d;d++)f=b(a[d].name,c,!1),a[d].cbs.forEach(function(a){a(f)})};c("file","end","{root}/parser/reader")}catch(o){c("error","init",o)}return{parseFile:b}}.apply(this,[b[1].reader]),b[17]=function(){function a(a){e=a}function b(a,b){return function(c){var d=[];for(var g in f)f[g][a]&&d.push(g);var h=_.pick(c,d);return _.map(h,function(c,d){return _.map(c,f[d][a].bind(null,e)).join(b)}).join(b)}}var c=d.bind(this,"{root}/parser/tpl/helpers");try{c("file","start","{root}/parser/tpl/helpers");var e,g={import_inner:b("import_in",", "),import_external:b("import_out",", "),before_export:b("before_export",";\n"),"export":b("export",", "),after:b("after",";\n")};Handlebars.registerHelper("submodule",function(a,b){return g[b.hash.type](a)});var h={check_imports:function(a,b,c){var d=[];for(var e in f)f[e].import_in&&d.push(e);var g=_.pick(a,d);return Object.keys(g).length?b(a):c(a)},import_inner:b("import_in",", "),import_external:b("import_out",", "),name:function(a){return a.name.slice(0,-4)},precompile:function(a){return Handlebars.precompile(a.file)}};Handlebars.registerHelper("template",function(a,b){return h[b.hash.type](a,b.fn,b.inverse)}),c("file","end","{root}/parser/tpl/helpers")}catch(i){c("error","init",i)}return{setModule:a}}.apply(this,[]),b[18]=function(a){function b(b,c){b=a(b),j("Writing file: ".bold.yellow,b.yellow),fs.writeFileSync(b,c)}var c=d.bind(this,"{root}/fs/write-file");try{c("file","start","{root}/fs/write-file"),c("file","end","{root}/fs/write-file")}catch(e){c("error","init",e)}return{writer:b}}.apply(this,[b[0].normalizePath]),b[19]=function(a,b){function c(b){a(b.entry+".module.json",JSON.stringify(b,!0,2)),b.library&&f(b),b.i18n&&g(b),h(b)}function f(b){var c=b.library.files,d=[];for(var e in c)d.push("//! ---- Library file: "+e+"\n"+c[e].file+"\n");a(b.entry+".lib.js",d.join(";\n"))}function g(b){var c="var I18N = "+JSON.stringify(b.i18n)+";";a(b.entry+".i18n.js",c)}function h(c){b(c);var d=e["{root}/parser/tpl/module"](c);return void a(c.entry+".module.js",d);var d}var i=d.bind(this,"{root}/parser/writer");try{i("file","start","{root}/parser/writer"),i("file","end","{root}/parser/writer")}catch(j){i("error","init",j)}return{writeModule:c}}.apply(this,[b[18].writer,b[17].setModule]),b[20]=function(){function a(a,b){function c(a){for(f in a){e=_.pick(a[f],g),q={links:{},vars:[],used:{}};for(l in e)for(k=e[l],m=0,n=k.length;n>m;m++)o=_.isString(k[m])&&k[m]||k[m].file,p=!_.isString(k[m])&&k[m].outer,o?(q.links[o]||(q.links[o]=[]),p&&q.links[o].push(p),~h.indexOf(l)&&(q.links[o].full=!0)):p&&(q.vars.push(p),q.used[p]=!1);s[f]=q}}function d(a){var b,c,e,f,g=t.indexOf(a);if(~g)return j("Ring structure found: ".bold.red),j(t.slice(g).join("\n").yellow),r=!1,!1;t.push(a),c=s[a];for(b in c.links){if(!s[b])return j("Not found file: ".bold.red+b.yellow+", required in file ".bold.red+a.yellow),r=!1,!1;for(e=0,f=c.links[b].length;f>e;e++){if(!~s[b].vars.indexOf(c.links[b][e]))return j("Variable ".bold.red+c.links[b][e].yellow+" required in file ".bold.red+a.yellow+" from file ".bold.red+b.yellow+" is not found".bold.red),r=!1,!1;s[b].used[c.links[b][e]]=!0}if(c.links[b].full)for(e in s[b].used)s[b].used[e]=!0;if(!d(b))return!1}return t.pop(),!0}var e,f,k,l,m,n,o,p,q,r=!0,s={};a.submodule&&c(a.submodule.files),a.template&&c(a.template.files);var t=[];if(!d(b))return!1;for(f in s){e=s[f];for(p in e.used)e.used[p]||(j("Variable ".bold.blue+p.white+" exported from ".bold.blue+f.white+" is not used".bold.blue),q=_.pick(a.submodule.files[f],i),_.every(q,function(a){for(var b=0,c=a.length;c>b;b++)if(a[b].outer&&a[b].outer==p)return a.splice(b,1),!1;return!0}))}return r&&j("Validation success.".bold.cyan),r}var b=d.bind(this,"{root}/parser/validate");try{b("file","start","{root}/parser/validate"),b("file","end","{root}/parser/validate")}catch(c){b("error","init",c)}return{validateModule:a}}.apply(this,[]),b[21]=function(a,b){function c(){var c=a();if(!c.i18n)return!1;var d={},e=b(c.i18n);return fs.readdirSync(e).filter(function(a){return 2!=a.length?!1:".svn"==a?!1:!0}).forEach(function(a){var b=d[a]={},c=nodePath.resolve(e,a);fs.readdirSync(c).filter(function(a){return".svn"==a?!1:"json"!=a.split(".").pop()?!1:!0}).sort(function(a,b){return"old.obsolete.json"==a?-1:"old.obsolete.json"==b?1:"old.raw.json"==a?-1:"old.raw.json"==b?1:0}).forEach(function(d){j("Reading i18n file:".bold.green,a.green,d.green),_.extend(b,JSON.parse(fs.readFileSync(nodePath.resolve(c,d),{encoding:"UTF-8"}).replace(/\/\/.*$/gm,"")))})}),d}var e=d.bind(this,"{root}/parser/i18n");try{e("file","start","{root}/parser/i18n"),e("file","end","{root}/parser/i18n")}catch(f){e("error","init",f)}return{i18nReader:c}}.apply(this,[b[0].getPaths,b[0].normalizePath]),b[22]=function(a,b,e,f,g,h,i){function j(a,b,c){var d=nodePath.resolve(a),e=require(d);e.paths.root=nodePath.normalize(nodePath.dirname(a)),/\.test\.json$/.test(a)&&e.paths.i18n&&delete e.paths.i18n;var f=e.paths.i18n||!1;e.paths.i18n&&delete e.paths.i18n,Array.isArray(e.build)||(e.build=[e.build]);for(var g=0,h=e.build.length;h>g;g++)g==h-1&&f&&(e.paths.i18n=f),k({paths:e.paths,path:e.build[g],encoding:e.encoding||"UTF-8",templateExt:e.templateExt||"hbs"},b,c)}function k(b,c,d){c||(c=console.log.bind(console)),m=c,o=d||!1,n("Building module: ".cyan.bold,b.path.cyan),a(b.paths),e(b.encoding),p=b.templateExt||"hbs";var j={type:"module",entry:b.path,paths:b.paths,submodule:{index:0,files:{}}},k=f(b.path,j,!0);j.submodule.files[k.name]=k,k.order=j.submodule.index++;var l=i();l&&(j.i18n=l),h(j,k.name)&&g(j)}var l=d.bind(this,"{root}/linker");try{l("file","start","{root}/linker");var m,n=function(){return m.apply(this,arguments)},o=!1,p="hbs";l("file","end","{root}/linker")}catch(q){l("error","init",q)}return c.push(n),c.push(o),c.push(p),this.build=j,this.linker=k,{}}.apply(this,[b[0].setPaths,b[0].normalizePath,b[1].setEncoding,b[16].parseFile,b[19].writeModule,b[20].validateModule,b[21].i18nReader]);{var j=c.shift(),k=c.shift(),l=c.shift();this.build,this.linker}}catch(m){d("module","error","startup",m)}return b.length=0,b=null,c.length=0,c=null,a=null,this}).call("undefined"!=typeof module&&module.exports||{},"undefined"!=typeof window&&window||this);